api_version: 1.0

id: boostsecurityio/semgrep
name: Boostsecurity Semgrep Scanner
namespace: boostsecurityio/semgrep

config:
  support_diff_scan: true

steps:
  - scan:
      command:
        docker:
          image: returntocorp/semgrep:0.112@sha256:22cdfb541673843cf8950df1a9cc386237435517f41f0d40bd9b7e306076441f
          command: semgrep scan --sarif --quiet --disable-version-check
          workdir: /src
          environment:
            XDG_CONFIG_HOME: /tmp
            HOME: /tmp
            SEMGREP_RULES: ${SEMGREP_RULES:-auto}
      format: sarif
      post-processor:
        docker:
          image: public.ecr.aws/boostsecurityio/boost-scanner-semgrep:ef527fd@sha256:af965088547e3a8a6c5e2a6e36dcb42bb00e3704bd23b48fbfad0c89d6ee8a30
          command: process
